{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TempWebsocketRootSchema",
  "definitions": {
    "Alliance": {
      "type": "string",
      "enum": [
        "blue",
        "red"
      ]
    },
    "AllianceStation": {
      "type": "object",
      "required": [
        "astop",
        "bypass",
        "estop",
        "id"
      ],
      "properties": {
        "astop": {
          "type": "boolean"
        },
        "bypass": {
          "type": "boolean"
        },
        "estop": {
          "type": "boolean"
        },
        "id": {
          "$ref": "#/definitions/AllianceStationId"
        },
        "team": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint",
          "minimum": 0.0
        }
      }
    },
    "AllianceStationId": {
      "type": "object",
      "required": [
        "alliance",
        "station"
      ],
      "properties": {
        "alliance": {
          "$ref": "#/definitions/Alliance"
        },
        "station": {
          "type": "integer",
          "format": "uint",
          "minimum": 0.0
        }
      }
    },
    "ArenaSignal": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Estop",
            "EstopReset",
            "Prestart",
            "PrestartUndo",
            "MatchPlay",
            "MatchCommit"
          ]
        },
        {
          "type": "object",
          "required": [
            "MatchArm"
          ],
          "properties": {
            "MatchArm": {
              "type": "object",
              "required": [
                "force"
              ],
              "properties": {
                "force": {
                  "type": "boolean"
                }
              }
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "ArenaState": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Init"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Reset"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Idle"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Estop"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Prestart"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "MatchArmed"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "MatchPlay"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "MatchComplete"
              ]
            }
          }
        }
      ]
    },
    "AuthResult": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "token",
            "type",
            "user"
          ],
          "properties": {
            "token": {
              "$ref": "#/definitions/UserToken"
            },
            "type": {
              "type": "string",
              "enum": [
                "AuthSuccess"
              ]
            },
            "user": {
              "$ref": "#/definitions/User"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "token",
            "type",
            "user"
          ],
          "properties": {
            "token": {
              "$ref": "#/definitions/UserToken"
            },
            "type": {
              "type": "string",
              "enum": [
                "AuthSuccessNewPin"
              ]
            },
            "user": {
              "$ref": "#/definitions/User"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "NoToken"
              ]
            }
          }
        }
      ]
    },
    "DriverStationReport": {
      "type": "object",
      "required": [
        "battery_voltage",
        "estop",
        "mode",
        "pkts_lost",
        "pkts_sent",
        "radio_ping",
        "rio_ping",
        "robot_ping",
        "rtt",
        "team"
      ],
      "properties": {
        "actual_station": {
          "anyOf": [
            {
              "$ref": "#/definitions/AllianceStationId"
            },
            {
              "type": "null"
            }
          ]
        },
        "battery_voltage": {
          "type": "number",
          "format": "double"
        },
        "estop": {
          "type": "boolean"
        },
        "mode": {
          "$ref": "#/definitions/RobotState"
        },
        "pkts_lost": {
          "type": "integer",
          "format": "uint16",
          "minimum": 0.0
        },
        "pkts_sent": {
          "type": "integer",
          "format": "uint16",
          "minimum": 0.0
        },
        "radio_ping": {
          "type": "boolean"
        },
        "rio_ping": {
          "type": "boolean"
        },
        "robot_ping": {
          "type": "boolean"
        },
        "rtt": {
          "type": "integer",
          "format": "uint8",
          "minimum": 0.0
        },
        "team": {
          "type": "integer",
          "format": "uint16",
          "minimum": 0.0
        }
      }
    },
    "EventDetails": {
      "type": "object",
      "required": [
        "av_chroma_key",
        "av_event_colour",
        "webcasts"
      ],
      "properties": {
        "av_chroma_key": {
          "type": "string"
        },
        "av_event_colour": {
          "type": "string"
        },
        "code": {
          "type": [
            "string",
            "null"
          ]
        },
        "event_name": {
          "type": [
            "string",
            "null"
          ]
        },
        "webcasts": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "JmsComponent": {
      "type": "object",
      "required": [
        "id",
        "last_tick",
        "name",
        "symbol",
        "timeout_ms"
      ],
      "properties": {
        "id": {
          "type": "string"
        },
        "last_tick": {
          "type": "string",
          "format": "date-time"
        },
        "name": {
          "type": "string"
        },
        "symbol": {
          "type": "string"
        },
        "timeout_ms": {
          "type": "integer",
          "format": "uint",
          "minimum": 0.0
        }
      }
    },
    "MatchPlayState": {
      "type": "string",
      "enum": [
        "Waiting",
        "Warmup",
        "Auto",
        "Pause",
        "Teleop",
        "Cooldown",
        "Complete",
        "Fault"
      ]
    },
    "Permission": {
      "type": "string",
      "enum": [
        "Admin",
        "FTA",
        "FTAA",
        "Scorekeeper",
        "ManageEvent",
        "ManageTeams",
        "ManageSchedule",
        "MatchFlow",
        "Estop"
      ]
    },
    "RobotState": {
      "type": "string",
      "enum": [
        "Auto",
        "Test",
        "Teleop"
      ]
    },
    "ScheduleBlock": {
      "type": "object",
      "required": [
        "block_type",
        "cycle_time",
        "end_time",
        "id",
        "name",
        "start_time"
      ],
      "properties": {
        "block_type": {
          "$ref": "#/definitions/ScheduleBlockType"
        },
        "cycle_time": {
          "type": "integer",
          "format": "int64"
        },
        "end_time": {
          "type": "string",
          "format": "date-time"
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "start_time": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "ScheduleBlockType": {
      "type": "string",
      "enum": [
        "General",
        "Qualification",
        "Playoff"
      ]
    },
    "SerialisedLoadedMatch": {
      "type": "object",
      "required": [
        "endgame",
        "match_id",
        "remaining",
        "state"
      ],
      "properties": {
        "endgame": {
          "type": "boolean"
        },
        "match_id": {
          "type": "string"
        },
        "remaining": {
          "type": "integer",
          "format": "int64"
        },
        "state": {
          "$ref": "#/definitions/MatchPlayState"
        }
      }
    },
    "Team": {
      "type": "object",
      "required": [
        "display_number",
        "number",
        "schedule",
        "wpakey"
      ],
      "properties": {
        "affiliation": {
          "type": [
            "string",
            "null"
          ]
        },
        "display_number": {
          "type": "string"
        },
        "location": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": [
            "string",
            "null"
          ]
        },
        "notes": {
          "type": [
            "string",
            "null"
          ]
        },
        "number": {
          "type": "integer",
          "format": "uint",
          "minimum": 0.0
        },
        "schedule": {
          "type": "boolean"
        },
        "wpakey": {
          "type": "string"
        }
      }
    },
    "TeamUpdate": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "number"
          ],
          "properties": {
            "number": {
              "type": "integer",
              "format": "uint",
              "minimum": 0.0
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "display_number"
          ],
          "properties": {
            "display_number": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "name"
          ],
          "properties": {
            "name": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "affiliation"
          ],
          "properties": {
            "affiliation": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "location"
          ],
          "properties": {
            "location": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "notes"
          ],
          "properties": {
            "notes": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "wpakey"
          ],
          "properties": {
            "wpakey": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "schedule"
          ],
          "properties": {
            "schedule": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "User": {
      "type": "object",
      "required": [
        "permissions",
        "pin_is_numeric",
        "realname",
        "tokens",
        "username"
      ],
      "properties": {
        "permissions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Permission"
          }
        },
        "pin_hash": {
          "type": [
            "string",
            "null"
          ]
        },
        "pin_is_numeric": {
          "type": "boolean"
        },
        "realname": {
          "type": "string"
        },
        "tokens": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "username": {
          "type": "string"
        }
      }
    },
    "UserToken": {
      "type": "object",
      "required": [
        "token",
        "user"
      ],
      "properties": {
        "token": {
          "type": "string"
        },
        "user": {
          "type": "string"
        }
      }
    },
    "UserUpdate": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "username"
          ],
          "properties": {
            "username": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "realname"
          ],
          "properties": {
            "realname": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "pin_hash"
          ],
          "properties": {
            "pin_hash": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "pin_is_numeric"
          ],
          "properties": {
            "pin_is_numeric": {
              "type": "boolean"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "permissions"
          ],
          "properties": {
            "permissions": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Permission"
              }
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "required": [
            "tokens"
          ],
          "properties": {
            "tokens": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "WebsocketPublish": {
      "title": "WebsocketPublish",
      "oneOf": [
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/JmsComponent"
              }
            },
            "path": {
              "const": "components/components"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/ArenaState"
            },
            "path": {
              "const": "arena/state"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "anyOf": [
                {
                  "$ref": "#/definitions/SerialisedLoadedMatch"
                },
                {
                  "type": "null"
                }
              ]
            },
            "path": {
              "const": "arena/current_match"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AllianceStation"
              }
            },
            "path": {
              "const": "arena/stations"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/DriverStationReport"
              }
            },
            "path": {
              "const": "arena/ds"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "string"
            },
            "path": {
              "const": "debug/test_publish"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/EventDetails"
            },
            "path": {
              "const": "event/details"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Team"
              }
            },
            "path": {
              "const": "team/teams"
            }
          }
        }
      ]
    },
    "WebsocketRpcRequest": {
      "title": "WebsocketRpcRequest",
      "oneOf": [
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "signal"
              ],
              "properties": {
                "signal": {
                  "$ref": "#/definitions/ArenaSignal"
                }
              }
            },
            "path": {
              "const": "arena/signal"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "in_text"
              ],
              "properties": {
                "in_text": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "debug/test_endpoint"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "details"
              ],
              "properties": {
                "details": {
                  "$ref": "#/definitions/EventDetails"
                }
              }
            },
            "path": {
              "const": "event/update"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "const": null
            },
            "path": {
              "const": "event/schedule_get"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "const": null
            },
            "path": {
              "const": "user/auth_with_token"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "pin",
                "username"
              ],
              "properties": {
                "pin": {
                  "type": "string"
                },
                "username": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/auth_with_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "pin"
              ],
              "properties": {
                "pin": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/update_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "const": null
            },
            "path": {
              "const": "user/logout"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "const": null
            },
            "path": {
              "const": "user/users"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "permissions",
                "realname",
                "username"
              ],
              "properties": {
                "permissions": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/Permission"
                  }
                },
                "realname": {
                  "type": "string"
                },
                "username": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/new"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "updates",
                "username"
              ],
              "properties": {
                "updates": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/UserUpdate"
                  }
                },
                "username": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/update"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "user_id"
              ],
              "properties": {
                "user_id": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/delete"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "affiliation",
                "display_number",
                "location",
                "name",
                "team_number"
              ],
              "properties": {
                "affiliation": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "display_number": {
                  "type": "string"
                },
                "location": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "name": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "team_number": {
                  "type": "integer",
                  "format": "uint",
                  "minimum": 0.0
                }
              }
            },
            "path": {
              "const": "team/new_team"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "team_number",
                "updates"
              ],
              "properties": {
                "team_number": {
                  "type": "integer",
                  "format": "uint",
                  "minimum": 0.0
                },
                "updates": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/TeamUpdate"
                  }
                }
              }
            },
            "path": {
              "const": "team/update"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "team_number"
              ],
              "properties": {
                "team_number": {
                  "type": "integer",
                  "format": "uint",
                  "minimum": 0.0
                }
              }
            },
            "path": {
              "const": "team/delete"
            }
          }
        }
      ]
    },
    "WebsocketRpcResponse": {
      "title": "WebsocketRpcResponse",
      "oneOf": [
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "arena/signal"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "string"
            },
            "path": {
              "const": "debug/test_endpoint"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/EventDetails"
            },
            "path": {
              "const": "event/update"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ScheduleBlock"
              }
            },
            "path": {
              "const": "event/schedule_get"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/AuthResult"
            },
            "path": {
              "const": "user/auth_with_token"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/AuthResult"
            },
            "path": {
              "const": "user/auth_with_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/User"
            },
            "path": {
              "const": "user/update_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "user/logout"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            },
            "path": {
              "const": "user/users"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/User"
            },
            "path": {
              "const": "user/new"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/User"
            },
            "path": {
              "const": "user/update"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "user/delete"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/Team"
            },
            "path": {
              "const": "team/new_team"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/Team"
            },
            "path": {
              "const": "team/update"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "team/delete"
            }
          }
        }
      ]
    }
  }
}