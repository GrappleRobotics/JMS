{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TempWebsocketRootSchema",
  "definitions": {
    "ArenaSignal": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "Estop",
            "EstopReset",
            "Prestart",
            "PrestartUndo",
            "MatchPlay",
            "MatchCommit"
          ]
        },
        {
          "type": "object",
          "required": [
            "MatchArm"
          ],
          "properties": {
            "MatchArm": {
              "type": "object",
              "required": [
                "force"
              ],
              "properties": {
                "force": {
                  "type": "boolean"
                }
              }
            }
          },
          "additionalProperties": false
        }
      ]
    },
    "ArenaState": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Init"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Reset"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "net_ready",
            "state"
          ],
          "properties": {
            "net_ready": {
              "type": "boolean"
            },
            "state": {
              "type": "string",
              "enum": [
                "Idle"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "Estop"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "net_ready",
            "state"
          ],
          "properties": {
            "net_ready": {
              "type": "boolean"
            },
            "state": {
              "type": "string",
              "enum": [
                "Prestart"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "MatchArmed"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "MatchPlay"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "net_ready",
            "state"
          ],
          "properties": {
            "net_ready": {
              "type": "boolean"
            },
            "state": {
              "type": "string",
              "enum": [
                "MatchComplete"
              ]
            }
          }
        }
      ]
    },
    "AuthResult": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "token",
            "type",
            "user"
          ],
          "properties": {
            "token": {
              "$ref": "#/definitions/UserToken"
            },
            "type": {
              "type": "string",
              "enum": [
                "AuthSuccess"
              ]
            },
            "user": {
              "$ref": "#/definitions/User"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "token",
            "type",
            "user"
          ],
          "properties": {
            "token": {
              "$ref": "#/definitions/UserToken"
            },
            "type": {
              "type": "string",
              "enum": [
                "AuthSuccessNewPin"
              ]
            },
            "user": {
              "$ref": "#/definitions/User"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "NoToken"
              ]
            }
          }
        }
      ]
    },
    "Permission": {
      "type": "string",
      "enum": [
        "Admin",
        "FTA",
        "FTAA"
      ]
    },
    "User": {
      "type": "object",
      "required": [
        "permissions",
        "pin_is_numeric",
        "realname",
        "tokens",
        "username"
      ],
      "properties": {
        "permissions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Permission"
          }
        },
        "pin_hash": {
          "type": [
            "string",
            "null"
          ]
        },
        "pin_is_numeric": {
          "type": "boolean"
        },
        "realname": {
          "type": "string"
        },
        "tokens": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "username": {
          "type": "string"
        }
      }
    },
    "UserToken": {
      "type": "object",
      "required": [
        "token",
        "user"
      ],
      "properties": {
        "token": {
          "type": "string"
        },
        "user": {
          "type": "string"
        }
      }
    },
    "WebsocketPublish": {
      "title": "WebsocketPublish",
      "oneOf": [
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/ArenaState"
            },
            "path": {
              "const": "arena/state"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "string"
            },
            "path": {
              "const": "debug/test_publish"
            }
          }
        }
      ]
    },
    "WebsocketRpcRequest": {
      "title": "WebsocketRpcRequest",
      "oneOf": [
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "const": null
            },
            "path": {
              "const": "user/auth_with_token"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "pin",
                "username"
              ],
              "properties": {
                "pin": {
                  "type": "string"
                },
                "username": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/auth_with_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "pin"
              ],
              "properties": {
                "pin": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/update_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "const": null
            },
            "path": {
              "const": "user/logout"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "const": null
            },
            "path": {
              "const": "user/users"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "user"
              ],
              "properties": {
                "user": {
                  "$ref": "#/definitions/User"
                }
              }
            },
            "path": {
              "const": "user/modify_user"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "user_id"
              ],
              "properties": {
                "user_id": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "user/delete_user"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "signal"
              ],
              "properties": {
                "signal": {
                  "$ref": "#/definitions/ArenaSignal"
                }
              }
            },
            "path": {
              "const": "arena/signal"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "required": [
                "in_text"
              ],
              "properties": {
                "in_text": {
                  "type": "string"
                }
              }
            },
            "path": {
              "const": "debug/test_endpoint"
            }
          }
        }
      ]
    },
    "WebsocketRpcResponse": {
      "title": "WebsocketRpcResponse",
      "oneOf": [
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/AuthResult"
            },
            "path": {
              "const": "user/auth_with_token"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/AuthResult"
            },
            "path": {
              "const": "user/auth_with_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "$ref": "#/definitions/User"
            },
            "path": {
              "const": "user/update_pin"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "user/logout"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            },
            "path": {
              "const": "user/users"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "user/modify_user"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "user/delete_user"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "null"
            },
            "path": {
              "const": "arena/signal"
            }
          }
        },
        {
          "required": [
            "data",
            "path"
          ],
          "properties": {
            "data": {
              "type": "string"
            },
            "path": {
              "const": "debug/test_endpoint"
            }
          }
        }
      ]
    }
  }
}