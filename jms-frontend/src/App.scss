@use "sass:color";

@import "~bootswatch/dist/darkly/variables";

$primary: #005fc4;
$success: #28a745;

$theme-colors: (
  "primary": $primary,
  "secondary": $secondary,
  "success": $success,
  "info": $info,
  "warning": $warning,
  "danger": $danger,
  "light": $light,
  "dark": $dark,

  "good": #28a745,
  "bad": #e74c3c,
  "red": #f53e31,
  "blue": #3152f5,
  "green": #28a745,
  "orange": #d47500,
  "purple": #9300e9,
  "hazard-yellow": #735a00,
  "hazard-red": #730000,
  "gold": #9c8501,
  "silver": #888,
  "bronze": #865320,
);

$accordion-bg: $dark;
$accordion-color: white;
$accordion-button-active-bg: $secondary;
$accordion-button-active-color: white;

$alliances: ( "red", "blue" );

@import "~bootstrap/scss/bootstrap";
@import "~react-datetime/css/react-datetime.css";
@import "~react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css";
@import "~react-bootstrap-typeahead/css/Typeahead.css";
@import "~react-csv-importer/dist/index.css";
@import "~bootswatch/dist/darkly/bootswatch";

@function theme-color($key) {
  @return map-get($theme-colors, $key);
}

@mixin scroll-gradient-horizontal($time) {
  background-size: 400% 100%;
  animation: scroll-gradient $time linear infinite;
}

@keyframes scroll-gradient {
  0% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 0%;
  }
  100% {
    background-position: 0% 50%;
  }
}

@mixin hazard-btn($bg_a, $bg_b: darken($bg_a, 10%), $text: #fff) {
  border-color: $bg_b;
  &:hover {
    &:enabled {
      @include scroll-gradient-horizontal(60s);
    }
  }
  @include hazard($bg_a, $bg_b, $text);
}

@mixin hazard($bg_a, $bg_b: darken($bg_a, 10%), $text: #fff) {
  background: repeating-linear-gradient(
    45deg,
    $bg_a, $bg_a 10px, $bg_b 10px, $bg_b 20px
  );
  color: $text;
}

@mixin hazard-active($bg_a, $bg_b: darken($bg_a, 10%), $text: #fff, $scroll: 60s) {
  @include hazard($bg_a, $bg_b, $text);
  @include scroll-gradient-horizontal($scroll);
}

a {
  text-decoration: none;

  &:hover {
    cursor: pointer;
  }
}

.nav-link.disabled {
  color: $gray-600;
}

.btn-block {
  width: 100%;
  display: block;
}

html, body, #root {
  height: 100%;
  touch-action: manipulation;
  overflow: hidden;   // Needed to stop the scroll bar showing up whilst hovering on popover
}

#root {
  @media screen and (max-width: 1080px) {
    font-size: 0.8rem;
  }
}

.wrapper {
  min-height: 100vh;
  min-height: -webkit-fill-available;
  max-height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;

  > .row {
    margin: 0;
  }
}

.app-viewport {
  flex-grow: 1;
  padding: 20px;
  overflow-y: scroll;

  &.fullscreen {
    overflow: hidden;
  }

  &[data-connected=false] {
    background-color: darken(theme-color("danger"), 40%);
  }
}

::-webkit-scrollbar {
  width: 3px;  /* Remove scrollbar space */
  background: transparent;  /* Optional: just make scrollbar invisible */
}

::-webkit-scrollbar-thumb {
  background: $gray-700;
}

.navbar {
  @media screen and (max-width: 1080px) {
    padding: 0.5rem 1rem;
  }
  padding: 1rem;
  background-color: theme-color("dark");
}

.navbar-padding-top {
  // padding-top: calc(1rem + 1rem + 2*0.375rem);
  // padding-top: calc(2rem + 20px);
  padding-top: var(--nav-height, calc(2rem + 20px));
  > .col {
    height: 0;
  }
}

.navbar-padding-bottom {
  padding-top: var(--nav-height, calc(1rem + 20px));
  > .col {
    height: 0;
  }
}

.top-nav {
  &:not([data-connected=true]) {
    background-color: theme-color("bad");
  }
  &[data-connected=true] {
    &[data-arena-state=Prestart] {
      background-color: theme-color("warning");
      &[data-arena-ready=true] {
        background-color: theme-color("dark");
      }
      &[data-ready=true] {
        background-color: theme-color("green");
      }
      &[data-ready=false] {
        &[data-ready-required=true] {
          background-color: theme-color("bad");
        }
      }
    }
    &[data-arena-state=MatchArmed] {
      @include hazard-active(theme-color("hazard-yellow"));
    }
    &[data-arena-state=MatchPlay] {
      &[data-match-state=Auto] {
        background-color: theme-color("purple");
      }
      &[data-match-state=Teleop] {
        background-color: theme-color("orange");
      }
    }
    &[data-arena-state=MatchComplete] {
      background-color: theme-color("warning");
      &[data-arena-ready=true] {
        background-color: theme-color("good");
      }
    }
    &[data-arena-state=MatchCommit] {
      background-color: theme-color("good");
    }
    &[data-arena-state=Estop] {
      @include hazard-active(theme-color("hazard-red"));
    }
  }
  &[data-fta=true] {
    border-bottom: 3px solid theme-color("gold");
  }
}

.brand-fta {
  color: theme-color("gold") !important;
}

.btn-estop, .btn-hazard-red {
  @include hazard-btn(theme-color("hazard-red"));
}

.btn-estop-reset, .btn-astop, .btn-hazard-yellow {
  @include hazard-btn(theme-color("hazard-yellow"));
}

.modal-xl {
  max-width: 80vw !important;
}

.estop-big {
  display: block;
  width: 100%;
  padding: 5rem;
  font-size: 6vw;
  font-weight: bold;
  margin-bottom: 1rem;
}

.estop-subtitle {
  font-size: 1.25rem;
  text-align: center;
}

.estop-cancel {
  display: block;
  width: 100%;
}

.ready-big {
  display: block;
  width: 100%;
  padding: 5rem;
  font-size: 5vw;
  font-weight: bold;
  margin-bottom: 1rem;
}

.ready-later {
  display: block;
  width: 100%;
  padding: 1rem;
  font-size: 2vw;
}

// .bg-hazard-dark {
//   background: repeating-linear-gradient(
//     45deg,
//     $hazard-dark-primary,
//     $hazard-dark-primary 10px,
//     $hazard-dark-secondary 10px,
//     $hazard-dark-secondary 20px
//   );
//   color: #fff;
// }

// .bg-hazard-dark-active {
//   @extend .bg-hazard-dark;
//   @include scroll-gradient-horizontal(150s);
// }

// .btn-hazard-dark {
//   @extend .bg-hazard-dark;
//   @include hazard-btn-dark;
//   border-color: $hazard-dark-secondary;
// }

// .btn-hazard-dark-active {
//   @extend .btn-hazard-dark;
//   @include scroll-gradient-horizontal(10s);
// }

// .bg-hazard-red-dark {
//   background: repeating-linear-gradient(
//     45deg, 
//     $hazard-red-dark-primary, 
//     $hazard-red-dark-primary 10px, 
//     $hazard-red-dark-secondary 10px, 
//     $hazard-red-dark-secondary 20px
//   );
//   color: #fff;
// }

// .bg-hazard-red-dark-active {
//   @extend .bg-hazard-red-dark;
//   @include scroll-gradient-horizontal(150s);
// }

// .btn-hazard-red-dark {
//   @extend .bg-hazard-red-dark;
//   @include hazard-btn-dark;
//   border-color: $hazard-red-dark-secondary;
// }

// .btn-hazard-red-dark-active {
//   @extend .btn-hazard-red-dark;
//   @include scroll-gradient-horizontal(10s);
// }

.home {
  max-width: 1350px;
}

.home-tile-sep {
  padding-left: 20px;
  padding-right: 20px;
  font-size: 20px;
  font-style: italic;
  opacity: 80%;
  padding-bottom: 3px;
  margin-top: 10px;
  margin-bottom: 10px;
  border-bottom: 2px solid rgba(white, 0.25);
}

.home-tile {
  * { color: white; }
  margin: 10px;
  min-width: 250px;
  min-height: 200px;
  max-width: 250px;
  max-height: 200px;
  padding: 0;

  .card {
    width: 100%;
    height: 100%;

    border: 3px solid $gray-800;
    border-radius: 20px;
    background-color: black;

    transition: all 0.1s ease;

    &:hover {
      transform: scale(105%);
      border-color: theme-color("gold");

      .home-tile-bg-img {
        opacity: 0.35;
      }

      .card-subtitle {
        opacity: 0.85;
      }

      .card-img-overlay {
        background: rgba(theme-color("success"), 0.18);
      }
    }
  }

  .home-tile-bg-img {
    transition: opacity 0.2s ease;

    opacity: 0.2;
    border-radius: 20px;
    object-fit: cover;
    width: 100%;
    height: 100%;
    opacity: 20%;
  }

  .card-title {
    text-align: center;
    font-size: 24px;
    font-weight: bold;
    margin-top: 10px;
    margin-bottom: 20px;
  }

  .card-subtitle {
    transition: opacity 0.2s ease;

    padding: 10px;
    font-size: 18px;
    font-style: italic;
    opacity: 0.5;
    text-align: center;
  }

  .card-img-overlay {
    transition: background-color 0.5s ease;

    border-radius: 20px;
    background: rgba(theme-color("primary"), 0.12);
  }
}

input[type=number] {
  &::-webkit-inner-spin-button, &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    margin: 0;
  }
}

.vr-right {
  border-right: 1px solid rgba(white, 0.1);
}

[data-buffer-diff=true] {
  border: 2px solid orange !important;
  &:focus {
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px red;
    outline: 0 none;
  }
}

.w-15 {
  width: 15%;
}

.table-striped > tbody > tr:nth-child(odd) {
  &:not([data-played]) {
    > td {
      @each $alliance in $alliances {
        &[data-alliance=#{$alliance}] {
          background-color: lighten(theme-color($alliance), 5%);
          color: white;
        }
      }
    }
  }

  &[data-played] {
    > td {
      background-color: rgb(70, 70, 70);
      font-style: italic;
    }
  }
}

.table-striped > tbody > tr:nth-child(even) {
  &:not([data-played]) {
    > td {
      @each $alliance in $alliances {
        &[data-alliance=#{$alliance}] {
          background-color: lighten(theme-color($alliance), 15%);
          color: white;
        }
      }
    }
  }

  &[data-played] {
    > td {
      background-color: rgb(82, 82, 82);
      font-style: italic;
    }
  }
}

tr.match {
  &[data-next] {
    background-color: rgb(122, 84, 0) !important;
    font-weight: bold;
  }

  &[data-ready=false] {
    * {
      color: $gray-600;
      font-style: italic;
    }
  }

  &.active {
    background-color: rgb(0, 85, 85) !important;
    font-weight: bold;
  }

  @each $alliance in blue, red {
    &[data-winner=#{$alliance}] {
      > td[data-alliance=#{$alliance}] {
        font-weight: bold;
        text-decoration: underline;
      }
    }
  }
}

th {
  @each $alliance in $alliances {
    &[data-alliance=#{$alliance}] {
      background-color: darken(theme-color($alliance), 15%);
      color: white;
    }
  }
}

.timekeeper-behind {
  font-weight: bold;
  color: #faa;
}

.bool-toggle {
  > .btn {
    &.false {
      &.active {
        @extend .btn-danger;
      }
      &:not(.active) {
        @extend .btn-outline-danger;
      }
    }
    &.true {
      &.active {
        @extend .btn-success;
      }
      &:not(.active) {
        @extend .btn-outline-success;
      }
    }
  }
}

#rankings-container {
  padding: 0;
}

.rankings {
  border-collapse: separate;

  thead > tr {
    th {
      text-align: center;
      color: $gray-900;
      font-size: 20px;
      background-color: $gray-100;
      position: sticky;
      top: 1px;
    }
  }
  tbody > tr {
    td {
      font-weight: bold;
      font-size: 24px;
      text-align: center;
    }

    &:nth-child(even) {
      background-color: $gray-800;
    }
    &:nth-child(odd) {
      background-color: $gray-700;
    }

    &[data-rank="1"] {
      background-color: theme-color("gold");
    }
    &[data-rank="2"] {
      background-color: theme-color("silver");
    }
    &[data-rank="3"] {
      background-color: theme-color("bronze");
    }
  }
}

.grow {
  flex-grow: 1;
}

.col-full {
  display: flex;
  flex-direction: column;
  padding: 0;

  > * {
    flex-grow: 1;
    margin: 0;
  }
}

.card {
  @each $alliance in $alliances {
    $tc: theme-color($alliance);
    &[data-alliance=#{$alliance}] {
      background-color: $tc;
      > .card-header {
        background-color: desaturate(darken($tc, 15%), 10%);
      }
    }
  }
}

.btn-xl {
  font-weight: bold;
  font-size: 1.45em;
  height: 3.75em;
}

.endgame-state {
  text-align: center;
}

.head-ref-field-ax {
  > .btn {
    margin-left: 1em;
  }
}

.timer {
  width: 100vw;
  height: 100vh;

  display: flex;
  flex-direction: column;

  justify-content: center;

  text-align: center;
  font-size: 40vw;
  font-weight: bold;
}

.team-estop {
  text-align: center;
  
  .estop-all {
    display: block;
    width: 100%;
    height: 50vh;
    font-weight: bold;
    font-size: 5em;
  }

  .estop-auto {
    display: block;
    width: 100%;
    height: 25vh;
    font-weight: bold;
    font-size: 3.5em;
  }

  .subtext {
    font-size: 0.8em;
    opacity: 0.8;
  }

  .team-estop-indicators {
    @extend .text-muted;
    font-size: 1.5em;
    
    .col {
      &[data-ok=false], &[data-estop=true] {
        color: theme-color("bad");
        font-weight: bold;
      }
    }
  }
}

@import "audience/Audience.scss";
@import "components/Components.scss";
@import "match_control/MatchControl.scss";
@import "wizard/EventWizard.scss";
@import "scoring/Scoring.scss";
@import "monitor/FieldMonitor.scss";
@import "csa/CSA.scss";